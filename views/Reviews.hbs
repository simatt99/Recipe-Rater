{{!-- 1 # Citation for the following html:
2 # Date: 2/15/24
3 # Adapted from Node.js - Step 4 - Dynamically Displaying Data
4 # used the base template but changed to fit my database
5 # Source URL: https://github.com/osu-cs340-ecampus/nodejs-starter-app/tree/main/Step%204%20-%20Dynamically%20Displaying%20Data --}}

{{!-- Data: reviewID, recipeID, userID, datePosted, rating, comment --}}

<div class="container-fluid">

<br>

<h1>Reviews Page</h1>

<br>

<div>
<table id="reviews-table">
    <thead>
        <tr>
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}          
        </tr>
    </thead>

    <tbody>
        {{#each data}}
        <tr data-value={{this.[Review ID]}}>
            <td>{{this.[Review ID]}}</td>
            <td>{{this.[Recipe Name]}}</td>
            <td>{{this.[Author]}}</td>
            <td>{{this.[Date Posted]}}</td>
            <td>{{this.[Rating]}}</td>
            <td>{{this.[Comment]}}</td>          
        </tr>
        {{/each}}
    </tbody>
</table>
</div>

<br>

{{!-- 2 # Citation for the following html:
2 # Date: 2/15/24
3 # Adapted from Node.js - Node.js - Step 5 - Adding New Data
4 # used the base template but changed to fit my database
5 # Source URL: https://github.com/osu-cs340-ecampus/nodejs-starter-app/tree/main/Step%205%20-%20Adding%20New%20Data --}}

<div>
<h2>Add Review</h2>
<p>To add a new review, please enter the information below and click 'Add'!</p>
<p>Inputs with a * next to them are nullable and not required</p>

<form id="post-review-form-ajax" class="row g-3">
    <div class="col-auto">
        <label for="post-review-recipe" class="visually-hidden">Recipe</label>
        <select id="post-review-recipe" class="form-select">
            <option value="">Select a Recipe</option>
            {{#each recipes}}
            <option value="{{this.recipeID}}">{{this.name}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <label for="post-review-user" class="visually-hidden">Author</label>
        <select id="post-review-user" class="form-select">
            <option value="">Select an Author</option>
            {{#each users}}
            <option value="{{this.userID}}">{{this.[Author]}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <label for="post-review-datePosted" class="form-label">Date Posted</label>
        <input type="date" id="post-review-datePosted">
    </div>
    <div class="col-auto">
        <label for="post-review-rating" class="form-label">Rating</label>
        <input type="number" id="post-review-rating" min="0" max="10" class="form-control">
    </div>
    <div class="col-auto">
        <label for="post-review-comment" class="visually-hidden">*Comment</label>
        <textarea id="post-review-comment" class="form-control" placeholder="*Comment"></textarea>
    </div>
    <div class="col-auto">
        <button id="post-review-submit" class="btn mb-3 btn-secondary">Add</button>
    </div>
</form>
</div>

<br>

<div>
<h2>Edit Review</h2>
<p>To edit a review, please enter the information below and click 'Edit'!</p>
<p>Inputs with a * next to them are nullable and not required</p>

<form id="put-review-form-ajax" class="row g-3">
    <div class="col-auto">
        <label for="put-review-id" class="visually-hidden">Review</label>
        <select id="put-review-id" class="form-select">
            <option value="">Select a Review</option>
            {{#each data}}
            <option value="{{this.[Review ID]}}">{{this.[Review ID]}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <label for="put-review-recipe" class="visually-hidden">Recipe</label>
        <select id="put-review-recipe" class="form-select">
            <option value="">Select a Recipe</option>
            {{#each recipes}}
            <option value="{{this.recipeID}}">{{this.name}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <label for="put-review-user" class="visually-hidden">Author</label>
        <select id="put-review-user" class="form-select">
            <option value="">Select an Author</option>
            {{#each users}}
            <option value="{{this.userID}}">{{this.[Author]}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <label for="put-review-datePosted" class="form-label">Date Posted</label>
        <input type="date" id="put-review-datePosted">
    </div>
    <div class="col-auto">
        <label for="put-review-rating" class="form-label">Rating</label>
        <input type="number" id="put-review-rating" min="0" max="10" class="form-control">
    </div>
    <div class="col-auto">
        <label for="put-review-comment" class="visually-hidden">*Comment</label>
        <textarea id="put-review-comment" class="form-control" placeholder="*Comment"></textarea>
    </div>
    <div class="col-auto">
        <button id="put-review-submit" class="btn mb-3 btn-secondary">Edit</button>
    </div>
</form>
</div>

<br>

<div>
<h2>Delete Review</h2>
<p>To delete a review, please enter the information below and click 'Delete'!</p>

<form id="delete-review-form-ajax">
    <div class="col-auto">
        <label for="delete-review-id" class="visually-hidden">Review</label>
        <select id="delete-review-id" class="form-select">
            <option value="">Select a Review</option>
            {{#each data}}
            <option value="{{this.[Review ID]}}">{{this.[Review ID]}}</option>
            {{/each}}
        </select>
    </div>
    <div class="col-auto">
        <button id="delete-review-submit" class="btn mb-3 btn-secondary">Delete</button>
    </div>
</form>
</div>

<br>

{{!-- <div>
<h2>Search Reviews</h2>
<p>To search for a review, please enter the information below and click 'Search'!</p>

<form id="search-review-form-ajax">
    <label for="search-name">Last Name: </label>
    <input type="text" name="search-name" id="search-review-name">

    <button id="search-review-submit">Search</button>
    <button id="search-review-reset">Reset</button>
</form>
</div> --}}

<br>
<br>
<br>

<script src="/js/review.js" type="text/javascript"></script>

</div>